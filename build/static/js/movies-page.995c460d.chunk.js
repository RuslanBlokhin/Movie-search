(this.webpackJsonptest=this.webpackJsonptest||[]).push([[4],{106:function(e,t,r){"use strict";r.r(t);var n=r(60),a=r.n(n),o=r(61),c=r(55),i=r(56),s=r(59),u=r(58),l=r(0),f=r(96),p=r.n(f),v=r(54),h=r(62),d=r(68),b=r(15),m=r(57),y=r(98),j=r.n(y),g=r(1),_=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={query:""},e.handleInputChange=function(t){var r=t.target.value;e.setState({query:r})},e.handleFormSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state),e.setState({query:""})},e}return Object(i.a)(r,[{key:"render",value:function(){var e=this.state.query;return Object(g.jsx)("div",{className:j.a.Searchbar,children:Object(g.jsxs)("form",{className:j.a.SearchForm,onSubmit:this.handleFormSubmit,children:[Object(g.jsx)("button",{type:"submit",className:j.a.button,children:Object(g.jsx)("span",{className:j.a.buttonLabel,children:"Search"})}),Object(g.jsx)("input",{className:j.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:this.handleInputChange,value:e})]})})}}]),r}(l.Component),O=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={movies:[],page:1,error:"",loader:!1,query:""},e.handleOnButtonClick=function(t){return function(){var r=e.state.query;e.setState({loader:!0}),v.a.getByQueryMovies(r,t).then((function(r){return e.addMoviesToState(r,t)})).then((function(){e.props.history.push({search:"query=".concat(r,"&page=").concat(t)}),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(t){return e.setState({error:t})})).finally((function(){e.setState({loader:!1})}))}},e.addMoviesToState=function(t,r){e.setState({movies:t,page:r,error:"",loader:!1})},e.handleFormData=function(t){var r=t.query;e.setState({page:1,query:r,movies:[],error:""})},e.getQueryFromProps=function(e){return p.a.parse(e.location.search)},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this.getQueryFromProps(this.props).query,t=this.getQueryFromProps(this.props).page,r=void 0===t?1:t;r=+r,e&&this.setState({query:e,page:r})}},{key:"componentDidUpdate",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,o=n.query,c=n.page,o===r.query){e.next=14;break}return e.prev=2,this.setState({loader:!0}),e.next=6,v.a.getByQueryMovies(o,c);case 6:i=e.sent,this.addMoviesToState(i,c),this.props.history.push({search:"query=".concat(o,"&page=").concat(c)}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.setState({error:e.t0});case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.error,r=e.movies,n=e.loader,a=e.page,o=!n&&r[0]&&!0;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(_,{onSubmit:this.handleFormData}),t&&Object(g.jsx)(m.a,{message:"Something wrong :("}),r[0]&&Object(g.jsx)(d.a,{movies:r}),n&&Object(g.jsx)(b.a,{}),o&&Object(g.jsxs)(g.Fragment,{children:[1===a?Object(g.jsx)(h.a,{onClick:this.handleOnButtonClick(a-1),name:"<<< Prev page ".concat(a-1),disabled:true}):Object(g.jsx)(h.a,{onClick:this.handleOnButtonClick(a-1),name:"<<< Prev page \u2116".concat(a-1)}),Object(g.jsx)(h.a,{onClick:this.handleOnButtonClick(a),name:"Current page \u2116".concat(a),disabled:true}),Object(g.jsx)(h.a,{onClick:this.handleOnButtonClick(a+1),name:"Next page ".concat(a+1," >>>")})]})]})}}]),r}(l.Component);t.default=O},54:function(e,t,r){"use strict";var n=r(65),a=r.n(n);a.a.defaults.baseURL="https://api.themoviedb.org/3/";var o="f09fb537b7ff9fc6acf20b99acef8c75",c={getTrendingMovies:function(e){return a.a.get("trending/movie/week?api_key=".concat(o,"&page=").concat(e)).then((function(e){return e.data.results}))},getByQueryMovies:function(e,t){return a.a.get("search/movie?api_key=".concat(o,"&page=").concat(t,"&query=").concat(e)).then((function(e){return e.data.results}))},getMovieById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a.a.get("movie/".concat(e).concat(t,"?api_key=").concat(o).concat(r))}};t.a=c},57:function(e,t,r){"use strict";r(0);var n=r(64),a=r.n(n),o=r(1);t.a=function(e){var t=e.message;return Object(o.jsx)("p",{className:a.a.Notification,children:t})}},62:function(e,t,r){"use strict";r(0);var n=r(63),a=r.n(n),o=r(1),c=function(e){var t=e.onClick,r=e.name,n=e.disabled;return Object(o.jsx)("button",{type:"button",onClick:t,className:a.a.Button,disabled:n,children:r})};c.defaultProps={disabled:!1},t.a=c},63:function(e,t,r){e.exports={Button:"Button_Button__3k3CP"}},64:function(e,t,r){e.exports={Notification:"Notification_Notification__3bSVe"}},66:function(e,t,r){e.exports={MoviesGalleryItem:"MoviesGalleryItem_MoviesGalleryItem__dy-LG",MoviesGalleryItem__image:"MoviesGalleryItem_MoviesGalleryItem__image__19zLQ",MoviesGalleryItem__title:"MoviesGalleryItem_MoviesGalleryItem__title__2pHtg",MoviesGalleryItem__vote:"MoviesGalleryItem_MoviesGalleryItem__vote__aKln4"}},67:function(e,t,r){e.exports={MoviesGallery:"MoviesGallery_MoviesGallery__1Yhes"}},68:function(e,t,r){"use strict";r(0);var n=r(10),a=r(3),o=r(66),c=r.n(o),i=r(1),s=function(e){var t=e.poster,r=e.title,a=e.vote,o=e.id,s=e.location;return Object(i.jsx)("li",{className:c.a.MoviesGalleryItem,children:Object(i.jsxs)(n.b,{to:{pathname:"/movies/".concat(o),state:{from:s}},children:[Object(i.jsx)("img",{src:t?"https://image.tmdb.org/t/p/w300".concat(t):"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg",alt:r,className:c.a.MoviesGalleryItem__image}),Object(i.jsx)("h2",{className:c.a.MoviesGalleryItem__title,children:r}),Object(i.jsx)("span",{className:c.a.MoviesGalleryItem__vote,children:a})]})})};s.defaultProps={poster:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg"};var u=Object(a.f)(s),l=r(67),f=r.n(l);t.a=function(e){var t=e.movies;return Object(i.jsx)("ul",{className:f.a.MoviesGallery,children:t.map((function(e){var t=e.id,r=e.poster_path,n=e.vote_average,a=e.title;return Object(i.jsx)(u,{poster:r,vote:n,title:a,id:t},t)}))})}},96:function(e,t,r){"use strict";var n=r(97),a=r(11);function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===typeof e?c(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=a({arrayFormat:"none"},t)),n=Object.create(null);return"string"!==typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),r(decodeURIComponent(a),o,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"===typeof r&&!Array.isArray(r)?e[t]=c(r):e[t]=r,e}),Object.create(null))):n},t.stringify=function(e,t){var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[o(t,e),"[",n,"]"].join(""):[o(t,e),"[",o(n,e),"]=",o(r,e)].join("")};case"bracket":return function(t,r){return null===r?o(t,e):[o(t,e),"[]=",o(r,e)].join("")};default:return function(t,r){return null===r?o(t,e):[o(t,e),"=",o(r,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(n){var a=e[n];if(void 0===a)return"";if(null===a)return o(n,t);if(Array.isArray(a)){var c=[];return a.slice().forEach((function(e){void 0!==e&&c.push(r(n,e,c.length))})),c.join("&")}return o(n,t)+"="+o(a,t)})).filter((function(e){return e.length>0})).join("&"):""}},97:function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},98:function(e,t,r){e.exports={Searchbar:"Searchbar_Searchbar___GkWb",SearchForm:"Searchbar_SearchForm__1LNkn",button:"Searchbar_button__1Q8Ho",buttonLabel:"Searchbar_buttonLabel__3kKuH",input:"Searchbar_input__1g5Wi"}}}]);
//# sourceMappingURL=movies-page.995c460d.chunk.js.map